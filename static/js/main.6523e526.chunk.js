(this["webpackJsonpreact-product-alert"]=this["webpackJsonpreact-product-alert"]||[]).push([[0],{19:function(e,t,a){},30:function(e,t,a){},35:function(e,t,a){e.exports=a(61)},40:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),o=a.n(c),l=(a(40),a(12)),i=a(11),s=a.n(i),u=a(13),m=(a(19),a(9)),d=a(8),p=a.n(d),f=a(14),h=a(16);var g=Object(m.a)((function(e){var t=e.productStore,a=Object(n.useRef)(null),c="https://x25iuvslok.execute-api.ap-south-1.amazonaws.com/dev/api/bargains",o=Object(n.useState)(!1),i=Object(l.a)(o,2),m=i[0],d=i[1],g=Object(n.useState)(!1),b=Object(l.a)(g,2),v=b[0],E=b[1],y=Object(n.useState)(!1),w=Object(l.a)(y,2),x=w[0],P=w[1],j=function(){var e=Object(u.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),P(!0),e.next=4,p()({method:"post",url:c,data:{email:t.email,productUrl:a.current.value}}).then((function(e){200===e.status&&(a.current.value="",d(!0),E(!1))})).catch((function(e){E(!0),d(!1),console.log(e)}));case 4:return e.next=6,p.a.get(c,{params:{email:t.email}}).then((function(e){0!==e.data.length&&(t.setProductData(e.data),t.setShowProduct(!0)),console.log(e.data.length)})).catch((function(e){console.log(e)})).then((function(){P(!1)})).then(setTimeout((function(){console.log("This will run after 5 second!"),d(!1),E(!1)}),5e3));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:" d-flex justify-content-center align-items-center container"},r.a.createElement("form",{class:"form-inline justify-center",onSubmit:function(e){j(e)}},r.a.createElement("label",{class:"sr-only",for:"inlineFormInputName2"},"Name"),r.a.createElement("input",{ref:a,type:"url",class:"form-control mb-2 mr-sm-2",id:"inlineFormInputName2",placeholder:"Enter product url",required:!0}),x?r.a.createElement(h.a,{style:{margin:"0 10px 10px 10px"},variant:"primary",disabled:!0},r.a.createElement(f.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Loading..."):r.a.createElement("button",{type:"submit",class:"btn btn-primary mb-2"},"Submit"))),r.a.createElement("div",{class:m&""!==t.email?"alert alert-success":"alert-none",role:"alert"},m&""!==t.email?"Product added successfully!":""),r.a.createElement("div",{class:v&""!==t.email?"alert alert-danger":"alert-none",role:"alert"},v&""!==t.email?"Error! Only Amazon.in and Flipkart.com Urls are supported.":""),r.a.createElement("div",{class:v&""===t.email?"alert alert-danger":"alert-none",role:"alert"},v&""===t.email?"Error! Please add email first.":""))})),b=(a(30),a(32)),v=a(17),E=a(31),y="https://x25iuvslok.execute-api.ap-south-1.amazonaws.com/dev/api/bargains",w=Object(m.a)((function(e){var t=e.productStore,a=function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete("".concat(y,"/").concat(a));case 2:return e.next=4,p.a.get(y,{params:{email:t.email}}).then((function(e){0!==e.data.length?(t.setProductData(e.data),t.setShowProduct(!0)):(t.setShowProduct(!0),t.setProductData("")),console.log(e.data.length)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log(""===t.productData),t.showProduct?""===t.productData?r.a.createElement("div",{class:"alert alert-warning",role:"alert"},"You haven't added any products yet!"):r.a.createElement(E.a,null,r.a.createElement(b.a,null,t.productData.map((function(e,t){return r.a.createElement(v.a,{className:"  d-flex justify-content-center align-items-center container",show:!0,onClose:function(t){a(e.bargainId)},key:t},r.a.createElement(v.a.Header,null,r.a.createElement("a",{href:e.productUrl,rel:"noopener noreferrer",target:"_blank"},r.a.createElement("strong",null,e.productTitle))))})))):""}));a(60);var x=Object(m.a)((function(e){var t=e.productStore,a=Object(n.useRef)(null),c=Object(n.useState)(!1),o=Object(l.a)(c,2),i=o[0],s=o[1];return r.a.createElement("div",{className:"App container"},r.a.createElement("h1",{style:{padding:"2px"}}," Bargain "),r.a.createElement("h3",{style:{padding:"2px"}},r.a.createElement("small",{class:"text-muted"},"Track prices and get alerts on your email")),r.a.createElement("div",{style:{paddingTop:"20px"},className:"d-flex justify-content-center align-items-center container"},r.a.createElement("form",{class:"form-inline justify-center",onSubmit:function(e){!function(e){e.preventDefault(),t.setEmail(a.current.value),s(!0),p.a.get(y,{params:{email:a.current.value}}).then((function(e){0!==e.data.length?(t.setProductData(e.data),t.setShowProduct(!0)):(t.setProductData(""),t.setShowProduct(!0)),console.log(e.data.length)})).catch((function(e){console.log(e)})).then((function(){s(!1)}))}(e)},style:{padding:"10px"}},r.a.createElement("label",{class:"sr-only",for:"inlineFormInputName2"},"Name"),r.a.createElement("input",{ref:a,type:"email",class:"form-control mb-2 mr-sm-2",id:"inlineFormInputName2",placeholder:"Enter email",required:!0}),i?r.a.createElement(h.a,{style:{margin:"0 10px 10px 10px"},variant:"primary",disabled:!0},r.a.createElement(f.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Loading..."):r.a.createElement("button",{type:"submit",class:"btn btn-primary mb-2"},"Submit"))),r.a.createElement(g,{productStore:t}),r.a.createElement(w,{productStore:t}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=a(33),j=a(34),S=a(1),O=function(){function e(){Object(P.a)(this,e),this.productData="",this.email="",this.showProduct=!1,this.fetchingItems=!1,this.fetchingProduct=!1}return Object(j.a)(e,[{key:"setProductData",value:function(e){this.productData=e}},{key:"setEmail",value:function(e){this.email=e}},{key:"setShowProduct",value:function(e){this.showProduct=e}},{key:"setFetchingItems",value:function(e){this.fetchingItems=e}},{key:"setFetchingProduct",value:function(e){this.fetchingProduct=e}}]),e}(),k=new(O=Object(S.i)(O,{productData:S.n,email:S.n,showProduct:S.n,fetchingItems:S.n,fetchingProduct:S.n,setFetchingItems:S.f,setFetchingProduct:S.f,setShowProduct:S.f,setProductData:S.f,setEmail:S.f}));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,{productStore:k})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.6523e526.chunk.js.map